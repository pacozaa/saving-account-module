sequenceDiagram
    participant Customer as CUSTOMER (Client)
    participant Gateway as API Gateway
    participant Auth as Auth Service
    participant UsersDB as Users DB
    participant Account as Account Service
    participant AccountsDB as Accounts DB

    Note over Customer,AccountsDB: Feature 4: Account Information

    Note over Customer: Step 1: CUSTOMER logs in
    
    Customer->>Gateway: POST /auth/login<br/>{email, password}
    Gateway->>Auth: Validate credentials
    Auth->>UsersDB: SELECT User<br/>WHERE email = ?
    UsersDB-->>Auth: User found (role=CUSTOMER/PERSON)
    Auth->>Auth: Verify password (BCrypt)
    
    alt Invalid credentials
        Auth-->>Gateway: 401 Unauthorized
        Gateway-->>Customer: Login failed
    else Valid credentials
        Auth->>Auth: Generate JWT token<br/>(userId, role, email)
        Auth-->>Gateway: {token, expiresIn, userId}
        Gateway-->>Customer: {token, expiresIn, userId}
        
        Note over Customer: Step 2: Get account information
        
        Customer->>Gateway: GET /accounts/my-accounts<br/>Authorization: Bearer {token}
        Gateway->>Gateway: Validate JWT token
        Gateway->>Gateway: Extract userId from token
        Gateway->>Account: GET /accounts/user/{userId}
        
        Account->>AccountsDB: SELECT Accounts<br/>WHERE userId = ?
        
        alt No accounts found
            AccountsDB-->>Account: Empty result
            Account-->>Gateway: 404 No accounts found
            Gateway-->>Customer: You don't have any accounts yet
        else Accounts found
            AccountsDB-->>Account: List of accounts
            Account-->>Gateway: 200 OK<br/>[{accountId, accountNumber,<br/>accountType, balance,<br/>createdAt}]
            Gateway-->>Customer: Your accounts:<br/>[{accountNumber, balance,<br/>accountType, createdAt}]
        end
    end
    
    Note over Customer: CUSTOMER can view:<br/>- Account number<br/>- Current balance<br/>- Account type<br/>- Created date
